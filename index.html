<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Al-Quran & Chat</title>
    <meta name="description" content="Read the Holy Quran with translations and chat with fellow Muslims">
    <meta name="theme-color" content="#2D7D32">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="QuranChat">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkFsLVF1cmFuICYgQ2hhdCIsCiAgInNob3J0X25hbWUiOiAiUXVyYW5DaGF0IiwKICAiZGVzY3JpcHRpb24iOiAiUmVhZCB0aGUgSG9seSBRdXJhbiB3aXRoIHRyYW5zbGF0aW9ucyBhbmQgY2hhdCB3aXRoIGZlbGxvdyBNdXNsaW1zIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJ0aGVtZV9jb2xvciI6ICIjMkQ3RDMyIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJd0lpQm9aV2xuYUhROU1USXdJaUJoYm05dGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaaUkrUEhKbFkzUWdkMmxrZEdnOU1USXdJR2hsYVdkb2REMHhNakFnWm1sc2JEMGlJekpFTjBRek1pSXZQand2YzNablBnPT0iLAogICAgICAic2l6ZXMiOiAiMTIweDEyMCIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXSwKICAib3JpZW50YXRpb24iOiAicG9ydHJhaXQiLAogICJjYXRlZ29yaWVzIjogWyJyZWxpZ2lvbiIsICJzb2NpYWwiXQp9">
    
    <!-- Google Fonts for Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>Loading Al-Quran...</p>
        </div>
    </div>

    <!-- App Container -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 id="header-title">Al-Quran</h1>
                <div class="header-actions">
                    <button id="profile-btn" class="btn btn--icon" title="Profile">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </button>
                    <button id="back-btn" class="btn btn--icon hidden" title="Back">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5"></path>
                            <path d="M12 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Surah List View -->
            <div id="surah-list-view" class="view">
                <div class="search-container">
                    <input type="text" id="surah-search" class="form-control" placeholder="Search surahs...">
                </div>
                <div id="surah-list" class="surah-list">
                    <!-- Surahs will be loaded here -->
                </div>
            </div>

            <!-- Surah Detail View -->
            <div id="surah-detail-view" class="view hidden">
                <div class="surah-header">
                    <h2 id="surah-name"></h2>
                    <p id="surah-info"></p>
                </div>
                <div id="ayah-list" class="ayah-list">
                    <!-- Ayahs will be loaded here -->
                </div>
            </div>

            <!-- Chat List View -->
            <div id="chat-list-view" class="view hidden">
                <div class="chat-header">
                    <h2>Messages</h2>
                    <div class="chat-header-actions">
                        <button id="clear-all-chats-btn" class="btn btn--outline btn--sm">Clear All</button>
                        <button id="new-chat-btn" class="btn btn--primary btn--sm">New Chat</button>
                    </div>
                </div>
                <div id="chat-list" class="chat-list">
                    <!-- Chat list will be loaded here -->
                </div>
            </div>

            <!-- Chat View -->
            <div id="chat-view" class="view hidden">
                <div class="chat-header">
                    <h3 id="chat-partner-name"></h3>
                    <button id="delete-chat-btn" class="btn btn--outline btn--sm">Delete Chat</button>
                </div>
                <div id="messages-container" class="messages-container">
                    <div id="messages" class="messages">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <input type="text" id="message-input" class="form-control" placeholder="Type a message...">
                        <button id="send-btn" class="btn btn--primary btn--sm">Send</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Welcome to Al-Quran Chat</h3>
            </div>
            <div class="modal-body">
                <div id="login-tabs" class="tabs">
                    <button class="tab-button active" data-tab="signin">Sign In</button>
                    <button class="tab-button" data-tab="signup">Sign Up</button>
                </div>
                
                <!-- Sign In Tab -->
                <div id="signin-tab" class="tab-content active">
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="signin-email" class="form-control" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="signin-password" class="form-control" placeholder="Enter your password">
                    </div>
                    <div id="signin-error" class="error-message hidden"></div>
                    <button id="signin-btn" class="btn btn--primary btn--full-width">Sign In</button>
                    
                    <div class="divider">
                        <span>or</span>
                    </div>
                    
                    <button id="google-signin-btn" class="btn btn--outline btn--full-width">
                        <svg width="20" height="20" viewBox="0 0 24 24" style="margin-right: 8px;">
                            <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                            <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                            <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                            <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                        </svg>
                        Continue with Google
                    </button>
                </div>
                
                <!-- Sign Up Tab -->
                <div id="signup-tab" class="tab-content">
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" id="signup-username" class="form-control" placeholder="Choose a username">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="signup-email" class="form-control" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" id="signup-password" class="form-control" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" id="signup-confirm-password" class="form-control" placeholder="Confirm your password">
                    </div>
                    <div id="signup-error" class="error-message hidden"></div>
                    <button id="signup-btn" class="btn btn--primary btn--full-width">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Search Modal -->
    <div id="user-search-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Find Users</h3>
                <button id="close-search-modal" class="btn btn--icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <input type="text" id="user-search-input" class="form-control" placeholder="Search users...">
                </div>
                <div id="user-search-results" class="user-search-results">
                    <!-- Search results will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="confirmation-title">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="confirmation-message"></p>
                <div class="modal-actions">
                    <button id="confirmation-cancel" class="btn btn--outline">Cancel</button>
                    <button id="confirmation-confirm" class="btn btn--primary">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="success-toast" class="toast toast--success hidden">
        <div class="toast-content">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20,6 9,17 4,12"></polyline>
            </svg>
            <span id="success-message">Action completed successfully</span>
        </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="toast toast--error hidden">
        <div class="toast-content">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <span id="error-message">An error occurred</span>
        </div>
    </div>

    <!-- Context Menu for Messages -->
    <div id="context-menu" class="context-menu hidden">
        <button id="delete-message" class="context-menu-item">Delete Message</button>
    </div>

    <script src="app.js"></script>
</body>
</html>